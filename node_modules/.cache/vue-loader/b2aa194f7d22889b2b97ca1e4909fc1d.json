{"remainingRequest":"/home/stoneage/VUE.JS Projects/Zebu-Admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/stoneage/VUE.JS Projects/Zebu-Admin/src/views/accessLogs.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/stoneage/VUE.JS Projects/Zebu-Admin/src/views/accessLogs.vue","mtime":1658148974408},{"path":"/home/stoneage/VUE.JS Projects/Zebu-Admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/stoneage/VUE.JS Projects/Zebu-Admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/stoneage/VUE.JS Projects/Zebu-Admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/stoneage/VUE.JS Projects/Zebu-Admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6ICgpID0+ICh7CiAgICB0YWJsZTogIiIsCiAgICB1c2VySWQ6ICIiLAogICAgdXJsOiAiIiwKICAgIGRhdGU6IG51bGwsCiAgICAvLwogICAgZGF0ZU1lbnU6IGZhbHNlLAogICAgZm9ybVZhbGlkOiBmYWxzZSwKICAgIGRhdGVSdWxlczogWyh2KSA9PiAhIXYgfHwgIkRhdGUgaXMgcmVxdWlyZWQiXSwKICAgIHVybFBhdGhSdWxlczogWyh2KSA9PiAhIXYgfHwgIlVSTCBQYXRoIGlzIHJlcXVpcmVkIl0sCiAgICB0YWJsZVJ1bGVzOiBbKHYpID0+ICEhdiB8fCAiTG9nIHR5cGUgaXMgcmVxdWlyZWQiXSwKICAgIHVzZXJJZFJ1bGVzOiBbKHYpID0+ICEhdiB8fCAiVXNlciBJZCBpcyByZXF1aXJlZCJdLAogICAgb2Zmc2V0OiAwLAogICAgY3VycmVudEpzb246IFtdLAogICAgZGlhbG9nOiBmYWxzZSwKICAgIGNvcHlUZXh0OiAiY29weSIsCiAgfSksCgogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKCJsb2dzIiwgewogICAgICBhY2Nlc3NMb2dzOiAiZ2V0QWNjZXNzTG9ncyIsCiAgICAgIHRvdGFsQ291bnQ6ICJnZXRUb3RhbENvdW50IiwKICAgICAgdXJsUGF0aHM6ICJnZXRVcmxQYXRocyIsCiAgICB9KSwKICAgIGNvbXB1dGVkRGF0ZUZvcm1hdHRlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUpOwogICAgfSwKICB9LAoKICB3YXRjaDogewogICAgdXNlcklkKHZhbCkgewogICAgICB0aGlzLnVzZXJJZCA9IHZhbC50b1VwcGVyQ2FzZSgpOwogICAgfSwKICB9LAoKICBjcmVhdGVkKCkgewogICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImxvZ3MvZ2V0RGlzdGluY3RVcmwiKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBjYWxsRGlhbG9nKGRhdGEpIHsKICAgICAgdGhpcy5jb3B5VGV4dCA9ICJDb3B5IjsKICAgICAgZGF0YSA/IHRoaXMuZGlhbG9nID0gdHJ1ZSA6ICcnOwogICAgICB0aGlzLmN1cnJlbnRKc29uID0gZGF0YQogICAgfSwKICAgIGZvcm1hdERhdGUoZGF0ZSkgewogICAgICBpZiAoIWRhdGUpIHJldHVybiBudWxsOwogICAgICBjb25zdCBbeWVhciwgbW9udGgsIGRheV0gPSBkYXRlLnNwbGl0KCItIik7CiAgICAgIHJldHVybiBgJHtkYXl9LSR7bW9udGh9LSR7eWVhcn1gOwogICAgfSwKICAgIGNvcHlUZXh0RnVuYygpIHsKICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGhpcy5jdXJyZW50SnNvbik7CiAgICAgIHZhciB0ZXh0YXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJqc29uRGF0YSIpOwogICAgICB0aGlzLmNvcHlUZXh0ID0gIkNvcGllZCI7CiAgICAgIHZhciBvayA9IGRvY3VtZW50LmV4ZWNDb21tYW5kKCJjb3B5Iik7CiAgICB9LAogICAgZ2V0QWNjZXNzTG9ncygpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKSB7CiAgICAgICAgbGV0IGpzb24gPSB7fTsKICAgICAgICBpZiAodGhpcy50YWJsZSA9PSAiQWNjZXNzTG9nIikgewogICAgICAgICAganNvbiA9IHsKICAgICAgICAgICAgdXNlcl9pZDogdGhpcy51c2VySWQsCiAgICAgICAgICAgIHVyaTogdGhpcy51cmwsCiAgICAgICAgICAgIGNyZWF0ZWRfb246IHRoaXMuZGF0ZSwKICAgICAgICAgICAgb2Zmc2V0OiB0aGlzLm9mZnNldCwKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgibG9ncy9nZXRBY2Nlc3NMb2ciLCBqc29uKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGFibGUgPT0gIlJlc3BvbnNlTG9nIikgewogICAgICAgICAganNvbiA9IHsKICAgICAgICAgICAgdXNlcl9pZDogdGhpcy51c2VySWQsCiAgICAgICAgICAgIHVybDogdGhpcy51cmwsCiAgICAgICAgICAgIGNyZWF0ZWRfb246IHRoaXMuZGF0ZSwKICAgICAgICAgICAgb2Zmc2V0OiB0aGlzLm9mZnNldCwKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgibG9ncy9nZXRSZXNwb25zZUxvZ0lucHV0IiwganNvbik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGpzb24gPSB7CiAgICAgICAgICAgIHVzZXJfaWQ6IHRoaXMudXNlcklkLAogICAgICAgICAgICBwYXRoOiB0aGlzLnVybCwKICAgICAgICAgICAgY3JlYXRlZF9vbjogdGhpcy5kYXRlLAogICAgICAgICAgICBvZmZzZXQ6IHRoaXMub2Zmc2V0LAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJsb2dzL2dldEFjY2Vzc0xvZ0lucHV0IiwganNvbik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcGFnZVJvdXRlKGlkeCkgewogICAgICB2YXIgcHJlSW5kZXggPSBpZHggIT0gMCA/IGlkeCA6IDA7CiAgICAgIHZhciBuZXh0SW5kZXggPSBwcmVJbmRleCA9PSAwID8gMCA6IHByZUluZGV4ICsgMzA7CiAgICAgIGxldCBqc29uID0ge307CiAgICAgIGlmICh0aGlzLnRhYmxlID09ICJBY2Nlc3NMb2ciKSB7CiAgICAgICAganNvbiA9IHsKICAgICAgICAgIHVzZXJfaWQ6IHRoaXMudXNlcklkLAogICAgICAgICAgdXJpOiB0aGlzLnVybCwKICAgICAgICAgIGNyZWF0ZWRfb246IHRoaXMuZGF0ZSwKICAgICAgICAgIG9mZnNldDogbmV4dEluZGV4LAogICAgICAgIH07CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImxvZ3MvZ2V0QWNjZXNzTG9nIiwganNvbik7CiAgICAgIH0gZWxzZSBpZiAodGhpcy50YWJsZSA9PSAiUmVzcG9uc2VMb2ciKSB7CiAgICAgICAganNvbiA9IHsKICAgICAgICAgIHVzZXJfaWQ6IHRoaXMudXNlcklkLAogICAgICAgICAgdXJsOiB0aGlzLnVybCwKICAgICAgICAgIGNyZWF0ZWRfb246IHRoaXMuZGF0ZSwKICAgICAgICAgIG9mZnNldDogbmV4dEluZGV4LAogICAgICAgIH07CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImxvZ3MvZ2V0UmVzcG9uc2VMb2dJbnB1dCIsIGpzb24pOwogICAgICB9IGVsc2UgewogICAgICAgIGpzb24gPSB7CiAgICAgICAgICB1c2VyX2lkOiB0aGlzLnVzZXJJZCwKICAgICAgICAgIHBhdGg6IHRoaXMudXJsLAogICAgICAgICAgY3JlYXRlZF9vbjogdGhpcy5kYXRlLAogICAgICAgICAgb2Zmc2V0OiBuZXh0SW5kZXgsCiAgICAgICAgfTsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgibG9ncy9nZXRBY2Nlc3NMb2dJbnB1dCIsIGpzb24pOwogICAgICB9CiAgICB9LAogIH0KfTsK"},{"version":3,"sources":["accessLogs.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"accessLogs.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"px-4 pt-4 w-100 d-flex align-center justify-space-between\">\n      <form></form>\n      <v-form ref=\"form\" v-model=\"formValid\" lazy-validation @submit.prevent=\"getAccessLogs()\">\n        <div class=\"d-flex align-center\">\n          <div class=\"px-2 fsize14\">\n            <div class=\"pb-1\">Logs Table</div>\n            <v-autocomplete outlined dense :items=\"['AccessLogInput','AccessLog','ResponseLog']\" :menu-props=\"{ bottom: true, offsetY: true }\" :rules=\"tableRules\" v-model=\"table\"></v-autocomplete>\n          </div>\n          <div class=\"px-2 fsize14\">\n            <div class=\"pb-1\">User Id</div>\n            <v-text-field outlined dense :rules=\"userIdRules\" v-model=\"userId\"></v-text-field>\n          </div>\n          <div class=\"px-2 fsize14\">\n            <div class=\"pb-1\">URL</div>\n            <v-autocomplete outlined dense :items=\"urlPaths\" :menu-props=\"{ bottom: true, offsetY: true }\" :rules=\"urlPathRules\" v-model=\"url\"></v-autocomplete>\n          </div>\n          <div class=\"px-2 fsize14\">\n            <v-menu v-model=\"dateMenu\" :close-on-content-click=\"false\" transition=\"scale-transition\" offset-y max-width=\"290px\" min-width=\"auto\">\n              <template v-slot:activator=\"{ on, attrs }\">\n                <div class=\"pb-1\">Date</div>\n                <v-text-field @click:append=\"dateMenu = true\" v-model=\"computedDateFormatted\" outlined persistent-hint :menu-props=\"{ bottom: true, offsetY: true }\" :rules=\"dateRules\" placeholder=\"Enter the Date of Event\" append-icon=\"mdi-calendar\" readonly dense v-bind=\"attrs\" v-on=\"on\"></v-text-field>\n              </template>\n              <v-date-picker v-model=\"date\" :show-current=\"true\" no-title @input=\"dateMenu = false\"></v-date-picker>\n            </v-menu>\n          </div>\n          <div class=\"px-2 d-flex justify-end\">\n            <v-btn height=\"40\" type=\"submit\" color=\"primary\" depressed class=\"text-capitalize fsize14\">Submit</v-btn>\n          </div>\n          <div class=\"loaderPart d-flex align-center\">\n            <v-progress-circular class=\"ml-2\" indeterminate v-if=\"loader\" size=\"18\" :width=\"2\" color=\"black\"></v-progress-circular>\n          </div>\n        </div>\n      </v-form>\n      <div>\n        <v-btn depressed text>\n          <v-icon>mdi-arrow-left</v-icon>\n        </v-btn>\n        <a depressed text height=\"20\" @click=\"pageRoute(idx)\" v-for=\"(i,idx) in Math.round(totalCount/30)\" :key=\"idx\" class=\"px-3 pt-2\">{{i}}</a>\n        <v-btn depressed text>\n          <v-icon>mdi-arrow-right</v-icon>\n        </v-btn>\n      </div>\n    </div>\n    <v-simple-table class=\"ma-4\" v-if=\"accessLogs.length != 0\">\n      <thead>\n        <tr>\n          <th class=\"text-center\" width=\"100px\">created Date</th>\n          <th class=\"text-center\">userId</th>\n          <th class=\"text-center\" v-if=\"table != 'ResponseLog'\">DeviceIp</th>\n          <th class=\"text-center\" v-if=\"table != 'ResponseLog'\">Domain</th>\n          <th class=\"text-center\">Input</th>\n          <th class=\"text-center\" v-if=\"table != 'ResponseLog'\">User Agent</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"(i,idx) in accessLogs\" :key=\"idx\">\n          <td class=\"text-center\" style=\"min-width:120px\">{{i.created_on.split(' ')[0]}}</td>\n          <td class=\"text-center\">{{i.user_id}}</td>\n          <td class=\"text-center\" v-if=\"table != 'ResponseLog'\">{{i.device_ip}}</td>\n          <td class=\"text-center\" v-if=\"table != 'ResponseLog'\">{{i.domain}}</td>\n          <td class=\"input_text text-center\" style=\"max-width:120px\" @click=\"callDialog(i.input ? i.input: i.response_data)\">{{i.input ? i.input: i.response_data}}</td>\n          <td class=\"text-center\" v-if=\"table != 'ResponseLog'\">{{i.user_agent}}</td>\n        </tr>\n      </tbody>\n\n    </v-simple-table>\n    <div v-else-if=\"!loader\" class=\"d-flex align-center justify-center min-height-100 mt-16\">\n      <div class=\"text-center\">No Access Logs Found</div>\n    </div>\n\n    <v-dialog v-model=\"dialog\" max-width=\"400\">\n      <v-card class=\"pa-8 cardBoxShadow rounded-lg\">\n        <div class=\"fsize14 line-height-2\" id=\"jsonData\" ref=\"jsonData\">{{currentJson}}</div>\n        <div class=\"d-flex justify-end\">\n          <!-- <v-btn depressed text @click=\"JSON.stringify(currentJson)\">Format</v-btn> -->\n          <v-btn depressed outlined text :color=\"copyText == 'Copy' ? 'black' : 'green'\" class=\"text-capitalize\" @click=\"copyTextFunc()\">{{copyText}}</v-btn>\n        </div>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nexport default {\n  data: () => ({\n    table: \"\",\n    userId: \"\",\n    url: \"\",\n    date: null,\n    //\n    dateMenu: false,\n    formValid: false,\n    dateRules: [(v) => !!v || \"Date is required\"],\n    urlPathRules: [(v) => !!v || \"URL Path is required\"],\n    tableRules: [(v) => !!v || \"Log type is required\"],\n    userIdRules: [(v) => !!v || \"User Id is required\"],\n    offset: 0,\n    currentJson: [],\n    dialog: false,\n    copyText: \"copy\",\n  }),\n\n  computed: {\n    ...mapGetters(\"logs\", {\n      accessLogs: \"getAccessLogs\",\n      totalCount: \"getTotalCount\",\n      urlPaths: \"getUrlPaths\",\n    }),\n    computedDateFormatted() {\n      return this.formatDate(this.date);\n    },\n  },\n\n  watch: {\n    userId(val) {\n      this.userId = val.toUpperCase();\n    },\n  },\n\n  created() {\n    this.$store.dispatch(\"logs/getDistinctUrl\");\n  },\n\n  methods: {\n    callDialog(data) {\n      this.copyText = \"Copy\";\n      data ? this.dialog = true : '';\n      this.currentJson = data\n    },\n    formatDate(date) {\n      if (!date) return null;\n      const [year, month, day] = date.split(\"-\");\n      return `${day}-${month}-${year}`;\n    },\n    copyTextFunc() {\n      navigator.clipboard.writeText(this.currentJson);\n      var textarea = document.getElementById(\"jsonData\");\n      this.copyText = \"Copied\";\n      var ok = document.execCommand(\"copy\");\n    },\n    getAccessLogs() {\n      if (this.$refs.form.validate()) {\n        let json = {};\n        if (this.table == \"AccessLog\") {\n          json = {\n            user_id: this.userId,\n            uri: this.url,\n            created_on: this.date,\n            offset: this.offset,\n          };\n          this.$store.dispatch(\"logs/getAccessLog\", json);\n        } else if (this.table == \"ResponseLog\") {\n          json = {\n            user_id: this.userId,\n            url: this.url,\n            created_on: this.date,\n            offset: this.offset,\n          };\n          this.$store.dispatch(\"logs/getResponseLogInput\", json);\n        } else {\n          json = {\n            user_id: this.userId,\n            path: this.url,\n            created_on: this.date,\n            offset: this.offset,\n          };\n          this.$store.dispatch(\"logs/getAccessLogInput\", json);\n        }\n      }\n    },\n    pageRoute(idx) {\n      var preIndex = idx != 0 ? idx : 0;\n      var nextIndex = preIndex == 0 ? 0 : preIndex + 30;\n      let json = {};\n      if (this.table == \"AccessLog\") {\n        json = {\n          user_id: this.userId,\n          uri: this.url,\n          created_on: this.date,\n          offset: nextIndex,\n        };\n        this.$store.dispatch(\"logs/getAccessLog\", json);\n      } else if (this.table == \"ResponseLog\") {\n        json = {\n          user_id: this.userId,\n          url: this.url,\n          created_on: this.date,\n          offset: nextIndex,\n        };\n        this.$store.dispatch(\"logs/getResponseLogInput\", json);\n      } else {\n        json = {\n          user_id: this.userId,\n          path: this.url,\n          created_on: this.date,\n          offset: nextIndex,\n        };\n        this.$store.dispatch(\"logs/getAccessLogInput\", json);\n      }\n    },\n  }\n};\n</script>\n\n<style>\n</style>"]}]}